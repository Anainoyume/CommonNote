# 建立索引的原则
#### 选择合适的字段建索引
- 高选择性列（区分度高）：比如用户ID、订单号。能大幅减少扫描行数。
- 频繁作为 `WHERE` 条件的列。
- 经常出现在 `JOIN` 的连接列。
- 经常出现在 `ORDER BY / GROUP BY` 的列。

#### ⚠️ 不适合建索引的列：
- 低选择性（如性别、是否删除标记），过滤效果差。
- 长文本、大字段（TEXT/BLOB），索引成本高。

#### 索引数量要适度
- 索引能加速查询，但也会增加写入成本（INSERT/UPDATE/DELETE 需要维护索引）。
- 一般一张表的索引控制在 3-5 个以内，多了要结合业务场景仔细评估。

#### 复合索引 > 单列索引
- 多条件查询时，复合索引比多个单列索引更高效。
- 遵循 最左前缀原则：
    - `(a,b,c)` 索引可用于 `(a)`、`(a,b)`、`(a,b,c)` 查询。
    - 如果查询条件没用到最左列，索引失效。

#### 覆盖索引
- 让查询只用索引就能返回结果，不必回表查数据
- 例如：
    ```sql
    CREATE INDEX idx_user_email ON user(email);
    SELECT email FROM user WHERE email LIKE 'abc%';
    ```
    查询只涉及 `email` ，完全走索引，速度很快

#### 避免索引失效
[详细参考](https://cloud.tencent.com/developer/article/2035778)
#### 考虑业务读写比例
- 读多写少 → 建更多索引，加快查询。
- 写多读少 → 减少索引，避免写操作开销过大。
#### 分区表/大表要特别注意
- 大表上索引要慎重，避免“索引过多反而拖慢性能”。
- 可考虑 分区表、分表、覆盖索引 + 业务缓存 结合。

#### ✅ 一句话总结：
索引是“空间换时间”，建索引的核心原则是：选择性高、查询频繁、排序分组/连接常用的列，并注意控制数量，避免写入性能下降。

[参考资料1](https://cloud.tencent.com/developer/article/2281003?policyId=1004)
[参考资料2](https://cloud.tencent.com/developer/article/1193302)